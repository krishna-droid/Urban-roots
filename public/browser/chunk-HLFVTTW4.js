import{a as B}from"./chunk-K6MDAUMQ.js";import{b as A}from"./chunk-766LJIF4.js";import{a as V,b as L}from"./chunk-DVZH33S7.js";import"./chunk-XMZSZHZZ.js";import{a as O}from"./chunk-KD2IJGWA.js";import{e as k,f as U,h as D,i as T,t as j,w as F}from"./chunk-PGUYAPD4.js";import{Ab as i,Bb as r,Cb as u,Gb as x,Lb as g,Nb as m,Vb as o,Wb as h,Xb as y,_a as M,bc as S,db as a,dc as C,eb as f,fc as w,gc as I,h as b,na as E,tb as c,vb as s,wa as p,xa as v}from"./chunk-7ZC2CAVG.js";var $=t=>["/event/edit",t];function z(t,n){t&1&&(i(0,"div",9),o(1,"You haven't created any events yet."),r())}function P(t,n){if(t&1){let e=x();i(0,"li",13)(1,"div",14),u(2,"img",15),i(3,"div",16)(4,"h3",17),o(5),r(),i(6,"p",18),o(7),w(8,"date"),r(),i(9,"div",19)(10,"span",20),u(11,"i",21),o(12),r(),i(13,"button",22),g("click",function(){let d=p(e).$implicit,_=m(2);return v(_.showInterestedUsers(d))}),o(14," Show "),r()()()(),i(15,"div",23)(16,"div",24)(17,"a",25),o(18," Edit "),r(),i(19,"button",26),g("click",function(){let d=p(e).$implicit,_=m(2);return v(_.deleteEvent(d.id))}),o(20," Delete "),r()()()()}if(t&2){let e=n.$implicit;a(2),s("src",e.imageUrl||"path/to/default-event-image.jpg",M),a(3),h(e.name),a(2),y("Date: ",I(8,5,e.dateTime,"medium"),""),a(5),y(" ",(e.interestedMembers==null?null:e.interestedMembers.length)||0," interested "),a(5),s("routerLink",C(8,$,e.id))}}function R(t,n){if(t&1&&(i(0,"div",10)(1,"ul",11),c(2,P,21,10,"li",12),r()()),t&2){let e=m();a(2),s("ngForOf",e.myEvents)}}function Y(t,n){t&1&&u(0,"div",27)}function G(t,n){if(t&1&&(i(0,"li"),o(1),r()),t&2){let e=n.$implicit;a(),h(e)}}function q(t,n){if(t&1){let e=x();i(0,"div",28)(1,"div",29)(2,"h2",30),o(3,"Interested Users"),r(),i(4,"ul",31),c(5,G,2,1,"li",32),r(),i(6,"button",33),g("click",function(){p(e);let d=m();return v(d.closeModal())}),o(7," Close "),r()()()}if(t&2){let e=m();a(5),s("ngForOf",e.interestedUsernames)}}var N=class t{constructor(n,e,l){this.eventService=n;this.authService=e;this.dialog=l}myEvents=[];interestedUsernames;showModal=!1;ngOnInit(){this.fetchMyEvents()}fetchMyEvents(){return b(this,null,function*(){let n=this.authService.getUserId();n?this.myEvents=yield this.eventService.getEventsCreatedByUser(n):console.error("User not authenticated. Cannot fetch events.")})}deleteEvent(n){confirm("Are you sure you want to delete this event?")&&this.eventService.deleteEvent(n).then(()=>{this.myEvents=this.myEvents.filter(e=>e.id!==n)}).catch(e=>{console.error("Error deleting event:",e)})}showInterestedUsers(n){this.authService.getUsernamesFromUids(n.interestedMembers).then(e=>{this.interestedUsernames=e,this.showModal=!0}).catch(e=>{console.error("Error fetching usernames:",e)})}closeModal(){this.showModal=!1,this.interestedUsernames=[]}static \u0275fac=function(e){return new(e||t)(f(B),f(O),f(V))};static \u0275cmp=E({type:t,selectors:[["app-manage"]],standalone:!0,features:[S],decls:12,vars:4,consts:[[1,"container","mx-auto","p-4"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold"],["routerLink","/event/create",1,"btn","btn-primary"],["class","text-gray-500",4,"ngIf"],["class","space-y-4",4,"ngIf"],["routerLink","/user/dashboard",1,"mt-4","btn","btn-secondary"],["class","fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden","true",4,"ngIf"],["class","fixed inset-0 flex items-center justify-center z-50",4,"ngIf"],[1,"text-gray-500"],[1,"space-y-4"],[1,"list-none","p-0"],["class","bg-base-100 rounded-lg shadow-md overflow-hidden",4,"ngFor","ngForOf"],[1,"bg-base-100","rounded-lg","shadow-md","overflow-hidden"],[1,"flex","items-center","p-4"],["alt","Event Image",1,"w-32","h-32","object-cover","rounded-md","mr-4",3,"src"],[1,"flex-1"],[1,"text-lg","font-bold"],[1,"text-gray-600","mb-2"],[1,"flex","justify-between","items-center","mb-2"],[1,"text-gray-500","flex","items-center"],[1,"fas","fa-users","mr-1"],[1,"text-blue-500","hover:underline",3,"click"],[1,"border-t","border-base-300"],[1,"flex","justify-end","p-4"],[1,"btn","btn-primary","mr-2",3,"routerLink"],[1,"btn","btn-error",3,"click"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity"],[1,"fixed","inset-0","flex","items-center","justify-center","z-50"],[1,"bg-base-100","rounded-lg","shadow-lg","p-6","max-w-md"],[1,"text-xl","font-bold","mb-4"],[1,"list-disc","pl-5"],[4,"ngFor","ngForOf"],[1,"mt-4","btn","btn-primary",3,"click"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Manage Your Events"),r(),i(4,"button",3),o(5," Create New Event "),r()(),c(6,z,2,0,"div",4)(7,R,3,1,"div",5),i(8,"button",6),o(9," Back "),r(),c(10,Y,1,0,"div",7)(11,q,8,1,"div",8),r()),e&2&&(a(6),s("ngIf",l.myEvents.length===0),a(),s("ngIf",l.myEvents.length>0),a(3),s("ngIf",l.showModal),a(),s("ngIf",l.showModal))},dependencies:[T,k,U,D,j,F,A,L],styles:[".custom-dialog-container[_ngcontent-%COMP%]{transform:translate(-50%,-50%)}"]})};export{N as ManageComponent};
