import{b as N,c as z,f as D,n as B}from"./chunk-3XLOQSKB.js";import{a as G}from"./chunk-KD2IJGWA.js";import{Cb as W,_ as Q,d as M,f as A,i as F,t as R,u as O,w as j}from"./chunk-PGUYAPD4.js";import{$b as L,Ab as n,Bb as r,Cb as s,Gb as g,Lb as f,Nb as d,Rb as U,Sb as E,Tb as I,Vb as a,Wb as k,Zb as P,_a as y,_b as V,bc as T,cc as C,db as u,dc as b,eb as w,h,na as S,tb as v,vb as p,wa as m,xa as c,ya as x}from"./chunk-7ZC2CAVG.js";var K=["fileInput"],X=o=>({"mobile-view":o}),Y=o=>({"border-b":o}),q=()=>({exact:!0});function Z(o,l){o&1&&(x(),n(0,"svg",37),s(1,"path",38),r())}function $(o,l){o&1&&(x(),n(0,"svg",37),s(1,"path",39),r())}function ee(o,l){if(o&1){let i=g();n(0,"div",40)(1,"ul",41)(2,"li")(3,"a",42),f("click",function(){m(i);let t=d();return c(t.open=!1)}),s(4,"i",10),a(5," Home "),r()(),n(6,"li")(7,"a",43),f("click",function(){m(i);let t=d();return c(t.open=!1)}),s(8,"i",12),a(9," Events "),r()(),n(10,"li")(11,"a",44),f("click",function(){m(i);let t=d();return c(t.open=!1)}),s(12,"i",14),a(13," Forum "),r()(),n(14,"li")(15,"a",45),f("click",function(){m(i);let t=d();return c(t.open=!1)}),s(16,"i",16),a(17," Profile "),r()()()()}o&2&&(u(3),p("routerLinkActiveOptions",C(1,q)))}function te(o,l){if(o&1){let i=g();n(0,"div",46)(1,"h2",47),a(2),r(),n(3,"button",48),f("click",function(){m(i);let t=d();return c(t.editUsername())}),a(4," Edit Username "),r()()}if(o&2){let i=d();u(2),k(i.username)}}function ie(o,l){if(o&1){let i=g();n(0,"div",49)(1,"input",50),L("ngModelChange",function(t){m(i);let _=d();return V(_.newUsername,t)||(_.newUsername=t),c(t)}),r(),n(2,"button",51),f("click",function(){m(i);let t=d();return c(t.saveUsername())}),a(3," Update "),r(),n(4,"button",52),f("click",function(){m(i);let t=d();return c(t.cancelEditUsername())}),a(5," Cancel "),r()()}if(o&2){let i=d();u(),P("ngModel",i.newUsername)}}var H=class o{constructor(l,i){this.authService=l;this.storage=i}fileInput;username=null;email=null;profileImageUrl=null;isEditingUsername=!1;newUsername="";open=!1;ngOnInit(){this.authService.getCurrentUser().then(l=>h(this,null,function*(){l?(this.username=l.displayName,this.email=l.email,this.profileImageUrl=yield this.authService.fetchProfileImageUrl()):console.error("User not authenticated.")}))}selectProfileImage(){this.fileInput.nativeElement.click()}onProfileImageSelected(l){return h(this,null,function*(){let i=l.target.files[0];if(i)try{let e=yield this.authService.uploadProfileImage(i);this.profileImageUrl=e,yield this.authService.updateProfileImageUrlInFirestore(e);let t=yield this.authService.getCurrentUser();t?yield Q(t,{photoURL:this.profileImageUrl}):console.error("User not authenticated. Cannot update profile image.")}catch(e){console.error("Error updating profile image:",e)}})}editUsername(){this.isEditingUsername=!0,this.newUsername=this.username||""}saveUsername(){this.newUsername&&this.authService.updateUsername(this.newUsername).then(()=>{this.username=this.newUsername,this.isEditingUsername=!1}).catch(l=>{console.error("Error updating username:",l)})}cancelEditUsername(){this.isEditingUsername=!1,this.newUsername=""}logout(){this.authService.logout()}static \u0275fac=function(i){return new(i||o)(w(G),w(W))};static \u0275cmp=S({type:o,selectors:[["app-profile"]],viewQuery:function(i,e){if(i&1&&U(K,5),i&2){let t;E(t=I())&&(e.fileInput=t.first)}},standalone:!0,features:[T],decls:49,vars:15,consts:[["fileInput",""],[1,"flex","flex-col","h-screen",3,"ngClass"],[1,"navbar","bg-base-100","shadow-md",3,"ngClass"],[1,"navbar-start","flex","items-center"],["aria-label","Toggle navigation",1,"lg:hidden","p-2","focus:outline-none",3,"click"],["class","w-6 h-6 text-gray-600","fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],[1,"btn","btn-ghost","normal-case","text-xl","ml-2"],[1,"navbar-center","hidden","lg:flex"],[1,"menu","menu-horizontal","px-1","space-x-4"],["routerLink","/user/dashboard"],[1,"fas","fa-home","mr-2"],["routerLink","/event/overview"],[1,"fas","fa-calendar","mr-2"],["routerLink","/forum/overview"],[1,"fas","fa-comments","mr-2"],["routerLink","/user/profile","routerLinkActive","text-primary",3,"routerLinkActiveOptions"],[1,"fas","fa-user","mr-2"],[1,"navbar-end"],[1,"btn","btn-primary",3,"click"],["class","lg:hidden z-20 absolute top-14 left-0 right-0 bg-base-100 shadow-lg",4,"ngIf"],[1,"flex","h-screen","flex-col"],[1,"flex-1","p-6"],[1,"flex","flex-col","lg:flex-row","gap-6"],[1,"container","mx-auto","p-4"],[1,"flex","flex-col","md:flex-row","gap-4"],[1,"flex","justify-center","md:w-1/4","pr-4"],[1,"md:w-3/4"],[1,"flex","flex-col","md:flex-row","items-center","mb-6"],[1,"relative","w-24","h-24","rounded-full","overflow-hidden","mr-4"],["alt","Profile Picture",1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","bottom-0","right-0","bg-gray-800","text-white","rounded-full","p-2",3,"click"],[1,"fas","fa-edit"],["type","file",2,"display","none",3,"change"],[1,"flex-1"],["class","flex flex-col items-start",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16m-7 6h7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"lg:hidden","z-20","absolute","top-14","left-0","right-0","bg-base-100","shadow-lg"],[1,"menu","p-4","space-y-2"],["routerLink","/user/dashboard","routerLinkActive","text-primary",3,"click","routerLinkActiveOptions"],["routerLink","/event/overview",3,"click"],["routerLink","/forum/overview",3,"click"],["routerLink","/user/profile",3,"click"],[1,"flex","flex-col","items-start"],[1,"text-xl","font-bold"],[1,"btn","btn-primary","mt-2",3,"click"],[1,"flex","items-center"],["type","text",1,"p-2","border","rounded-md","mr-2",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-secondary","ml-2",3,"click"]],template:function(i,e){if(i&1){let t=g();n(0,"div",1)(1,"header",2)(2,"div",3)(3,"button",4),f("click",function(){return m(t),c(e.open=!e.open)}),v(4,Z,2,0,"svg",5)(5,$,2,0,"svg",5),r(),n(6,"a",6),a(7,"UrbanRoots"),r()(),n(8,"div",7)(9,"ul",8)(10,"li")(11,"a",9),s(12,"i",10),a(13," Home "),r()(),n(14,"li")(15,"a",11),s(16,"i",12),a(17," Events "),r()(),n(18,"li")(19,"a",13),s(20,"i",14),a(21," Forum "),r()(),n(22,"li")(23,"a",15),s(24,"i",16),a(25," Profile "),r()()()(),n(26,"div",17)(27,"button",18),f("click",function(){return m(t),c(e.logout())}),a(28,"Log Out"),r()()(),v(29,ee,18,2,"div",19),n(30,"div",20)(31,"main",21)(32,"div",22)(33,"div",23)(34,"div",24),s(35,"div",25),n(36,"div",26)(37,"div",27)(38,"div",28),s(39,"img",29),n(40,"button",30),f("click",function(){return m(t),c(e.selectProfileImage())}),s(41,"i",31),r(),n(42,"input",32,0),f("change",function(J){return m(t),c(e.onProfileImageSelected(J))}),r()(),n(44,"div",33),v(45,te,5,1,"div",34)(46,ie,6,1,"div",35),n(47,"p",36),a(48),r()()()()()()()()()()}i&2&&(p("ngClass",b(10,X,!e.open)),u(),p("ngClass",b(12,Y,!e.open)),u(3),p("ngIf",!e.open),u(),p("ngIf",e.open),u(18),p("routerLinkActiveOptions",C(14,q)),u(6),p("ngIf",e.open),u(10),p("src",e.profileImageUrl||"https://static.vecteezy.com/system/resources/thumbnails/009/292/244/small/default-avatar-icon-of-social-media-user-vector.jpg",y),u(6),p("ngIf",!e.isEditingUsername),u(),p("ngIf",e.isEditingUsername),u(2),k(e.email))},dependencies:[B,N,z,D,F,M,A,R,j,O]})};export{H as ProfileComponent};
