import{Ab as R,Cb as b,Eb as I,Fb as S,Hb as v,Ib as j,kb as f,nb as u,ob as w,pb as E,qb as i,rb as m,sb as s,tb as p,ub as y,wb as D,zb as l}from"./chunk-PGUYAPD4.js";import{a as c,da as h,h as n,ia as g}from"./chunk-7ZC2CAVG.js";var F=class d{constructor(t,e){this.firestore=t;this.storage=e}createEvent(t){return n(this,null,function*(){try{let e=i(this.firestore,"events"),r=yield u(e,t);return console.log("Event created with ID:",r.id),r.id}catch(e){throw console.error("Error creating event:",e),e}})}getAllEvents(){return n(this,null,function*(){try{let t=i(this.firestore,"events"),e=yield y(t),r=[];return e.forEach(o=>{let a=o.data();r.push(c({id:o.id},a))}),r}catch(t){return console.error("Error fetching all events:",t),[]}})}getEventById(t){return n(this,null,function*(){try{let e=s(this.firestore,"events",t),r=yield p(e);if(r.exists())return c({id:r.id},r.data());throw console.error("Event not found with ID:",t),new Error("Event not found")}catch(e){throw console.error("Error fetching event by ID:",e),e}})}updateEvent(t,e){return n(this,null,function*(){try{let r=s(this.firestore,"events",t);yield l(r,e),console.log("Event updated successfully:",t)}catch(r){throw console.error("Error updating event:",r),r}})}deleteEvent(t){return n(this,null,function*(){try{let e=s(this.firestore,"events",t);yield m(e),console.log("Event deleted successfully:",t)}catch(e){throw console.error("Error deleting event:",e),e}})}toggleUserInterest(t,e){return n(this,null,function*(){try{let r=s(this.firestore,"events",t);yield l(r,{interestedMembers:E(e)}).catch(o=>n(this,null,function*(){if(o.code==="already-exists")yield l(r,{interestedMembers:w(e)});else throw o}))}catch(r){throw console.error("Error toggling user interest:",r),r}})}getEventsCreatedByUser(t){return n(this,null,function*(){try{let e=D(i(this.firestore,"events"),R("createdBy","==",t)),r=yield y(e),o=[];return r.forEach(a=>{let P=a.data();o.push(c({id:a.id},P))}),o}catch(e){return console.error("Error fetching events created by user:",e),[]}})}uploadEventImage(t){return n(this,null,function*(){let e=`events/${new Date().getTime()}_${t.name}`,r=v(this.storage,e);try{return yield j(r,t),yield S(r)}catch(o){throw console.error("Error uploading event image:",o),o}})}deleteEventImage(t){return n(this,null,function*(){try{let e=v(this.storage,t);yield I(e),console.log("Event image deleted successfully:",t)}catch(e){throw console.error("Error deleting event image:",e),e}})}static \u0275fac=function(e){return new(e||d)(g(f),g(b))};static \u0275prov=h({token:d,factory:d.\u0275fac,providedIn:"root"})};export{F as a};
