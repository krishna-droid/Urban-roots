import"./chunk-6KTXUKBV.js";import{b as T,f as D,g as L,h as k,l as z}from"./chunk-MA32JSFK.js";import{b as M}from"./chunk-2FKGSZ6Y.js";import{a as R}from"./chunk-IHOIJJLM.js";import{n as E}from"./chunk-3XLOQSKB.js";import{e as S,f as w,i as I,q as _,t as C,w as G}from"./chunk-PGUYAPD4.js";import{Ab as i,Bb as n,Cb as g,Lb as y,Nb as f,Vb as a,Wb as u,Xb as m,_a as v,bc as b,db as r,eb as c,f as F,h,na as x,tb as p,vb as l}from"./chunk-7ZC2CAVG.js";var d=F(R());function U(o,t){o&1&&(i(0,"div",6),a(1,"Loading garden details..."),n())}function A(o,t){if(o&1&&(i(0,"swiper-slide"),g(1,"img",20),n()),o&2){let e=t.index,s=f(2);r(),l("src",s.garden.images[e],v)}}function N(o,t){if(o&1&&(i(0,"div",7)(1,"div",8)(2,"div",9)(3,"h2",10),a(4),n(),i(5,"p",11),a(6,"Size: "),i(7,"span",12),a(8),n()()(),i(9,"swiper-container",13),p(10,A,2,1,"swiper-slide",14),n(),i(11,"div",15)(12,"h3",16),a(13,"Garden Details"),n(),i(14,"p",17),a(15),n(),i(16,"p",17),a(17),n(),i(18,"p",18),a(19),n()()(),i(20,"div",8),g(21,"div",19),n()()),o&2){let e=f();r(4),u(e.garden.name),r(4),m("",e.garden.sqft," sqft"),r(),l("slidesPerView",1.14)("centeredSlides",!0)("initialSlide",0)("threshold",5)("mousewheel",!1)("spaceBetween",20),r(),l("ngForOf",e.garden.images),r(5),m("Created by: ",e.garden.username,""),r(2),m("Type: ",e.garden.type,""),r(2),u(e.garden.description)}}var O=class o{constructor(t,e){this.route=t;this.gardenService=e}garden=null;map;ngOnInit(){this.route.paramMap.subscribe(t=>{let e=t.get("id");e&&this.fetchGardenDetails(e)})}ngAfterViewInit(){this.garden&&this.garden.location&&(this.initializeMap(),this.initializeImageSlider())}fetchGardenDetails(t){return h(this,null,function*(){try{this.garden=yield this.gardenService.getGardenById(t),this.map||setTimeout(()=>{this.initializeMap(),this.initializeImageSlider()},0)}catch(e){console.error("Error fetching garden details:",e)}})}initializeMap(){if(!this.garden||!this.garden.location)return;this.map=d.map("map",{dragging:!1,touchZoom:!1,doubleClickZoom:!1,scrollWheelZoom:!1,boxZoom:!1,keyboard:!1,zoomControl:!1}).setView([this.garden.location.latitude,this.garden.location.longitude],15),d.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map);let t=this.garden.images&&this.garden.images.length>0?this.garden.images[0]:"path/to/default-garden-icon.png",e=d.divIcon({className:"custom-garden-icon",html:`
          <div class="rounded-full border-4 border-green-500 overflow-hidden" style="width: 40px; height: 40px;">
            <img src="${t}" alt="Garden Image" class="w-full h-full object-cover">
          </div>
        `});d.marker([this.garden.latitude,this.garden.longitude],{icon:e}).addTo(this.map)}initializeImageSlider(){setTimeout(()=>{let t=document.querySelector(".mySwiper");t?new T(t,{modules:[D,L,k,z],spaceBetween:10,slidesPerView:1,navigation:!0,pagination:{clickable:!0},scrollbar:{draggable:!0}}):console.error("Swiper container not found. Make sure the images have been loaded.")},0)}copyGardenUrl(){if(this.garden&&this.garden.id){let t=`your-app-base-url/garden/${this.garden.id}`;navigator.clipboard.writeText(t).then(()=>{alert("Garden URL copied to clipboard!")}).catch(e=>{console.error("Could not copy text: ",e)})}}static \u0275fac=function(e){return new(e||o)(c(_),c(M))};static \u0275cmp=x({type:o,selectors:[["app-garden-details"]],standalone:!0,features:[b],decls:8,vars:2,consts:[[1,"container","mx-auto","p-6","bg-white","rounded-lg"],["class","text-gray-500 text-center py-8",4,"ngIf"],["class","flex flex-col md:flex-row gap-8",4,"ngIf"],[1,"mt-6","flex","justify-center"],[1,"bg-blue-600","hover:bg-blue-800","text-white","font-semibold","py-3","px-6","rounded-lg","shadow-md","transition-transform","transform","hover:scale-105",3,"click"],["routerLink","/user/dashboard",1,"ml-1","bg-gray-500","hover:bg-gray-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-gray-500","text-center","py-8"],[1,"flex","flex-col","md:flex-row","gap-8"],[1,"md:w-1/2"],[1,"mb-6"],[1,"text-3xl","font-extrabold","text-gray-800","mb-4"],[1,"text-gray-700","text-lg","font-medium"],[1,"text-blue-500","font-bold"],[1,"swiper","mySwiper","rounded-lg",2,"height","320px",3,"slidesPerView","centeredSlides","initialSlide","threshold","mousewheel","spaceBetween"],[4,"ngFor","ngForOf"],[1,"mt-6"],[1,"text-xl","font-bold","text-gray-800","mb-3"],[1,"text-gray-600","mb-2"],[1,"text-gray-600"],["id","map",1,"h-96","rounded-lg","shadow-lg","border","border-gray-300","overflow-hidden",2,"height","320px","margin-top","100px"],[1,"rounded-lg",3,"src"]],template:function(e,s){e&1&&(i(0,"div",0),p(1,U,2,0,"div",1)(2,N,22,12,"div",2),i(3,"div",3)(4,"button",4),y("click",function(){return s.copyGardenUrl()}),a(5," Copy Garden URL "),n(),i(6,"button",5),a(7," Back "),n()()()),e&2&&(r(),l("ngIf",!s.garden),r(),l("ngIf",s.garden))},dependencies:[I,S,w,E,C,G],styles:[".custom-garden-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0003}"]})};export{O as GardenDetailsComponent};
