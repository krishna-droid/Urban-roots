import"./chunk-6KTXUKBV.js";import{a as P}from"./chunk-K6MDAUMQ.js";import{b as z,f as B,g as R,h as O,l as j}from"./chunk-MA32JSFK.js";import{a as H}from"./chunk-IHOIJJLM.js";import{n as U}from"./chunk-3XLOQSKB.js";import{a as V}from"./chunk-KD2IJGWA.js";import{f as C,h as T,i as D,q as L,t as k,w as A}from"./chunk-PGUYAPD4.js";import{Ab as n,Bb as r,Cb as v,Gb as y,Lb as E,Nb as f,Vb as a,Wb as u,Xb as d,_a as S,bc as w,db as i,eb as m,f as F,fc as _,gc as M,h,na as g,tb as p,vb as l,wa as x,xa as b,xb as I}from"./chunk-7ZC2CAVG.js";var s=F(H());function q(o,t){o&1&&(n(0,"div",5),a(1,"Loading event details..."),r())}function W(o,t){if(o&1&&(n(0,"p",18),a(1),r()),o&2){let e=f(2);i(),d(" Location: ",e.event.locationText," ")}}function $(o,t){o&1&&v(0,"div",24)}function G(o,t){if(o&1){let e=y();n(0,"div",6)(1,"div",7)(2,"div",8)(3,"h2",9),a(4),r(),n(5,"p",10),a(6," Date & Time: "),n(7,"span",11),a(8),_(9,"date"),r()(),n(10,"p",12),v(11,"i",13),a(12),r()(),n(13,"swiper-container",14)(14,"swiper-slide"),v(15,"img",15),r()(),n(16,"div",16)(17,"h3",17),a(18,"Event Details"),r(),n(19,"p",18),a(20),r(),p(21,W,2,1,"p",19),n(22,"p",20),a(23),r(),n(24,"div",21)(25,"button",22),E("click",function(){x(e);let Z=f();return b(Z.toggleInterest())}),a(26),r()()()(),n(27,"div",7),p(28,$,1,0,"div",23),r()()}if(o&2){let e=f();i(4),u(e.event.name),i(4),u(M(9,19,e.event.dateTime,"medium")),i(4),d(" ",(e.event.interestedMembers==null?null:e.event.interestedMembers.length)||0," interested "),i(),l("slidesPerView",1.14)("centeredSlides",!0)("initialSlide",0)("threshold",5)("mousewheel",!1)("spaceBetween",20),i(2),l("src",e.event.imageUrl,S),i(5),d("Type: ",e.event.eventType,""),i(),l("ngIf",e.event.eventType==="offline"),i(2),u(e.event.description),i(2),I("bg-success",e.isInterested())("bg-base-300",!e.isInterested()),i(),d(" ",e.isInterested()?"Interested":"Show Interest"," "),i(2),l("ngIf",e.event.eventType==="offline")}}var N=class o{constructor(t,e,c){this.route=t;this.eventService=e;this.authService=c}event=null;map;ngOnInit(){s.Icon.Default.imagePath="assets/",this.route.paramMap.subscribe(t=>{let e=t.get("id");e&&this.fetchEventDetails(e)})}fetchEventDetails(t){return h(this,null,function*(){try{this.event=yield this.eventService.getEventById(t),this.event&&this.event.eventType==="offline"&&this.event.location&&setTimeout(()=>{this.initializeMap()},0)}catch(e){console.error("Error fetching event details:",e)}})}initializeMap(){!this.event||!this.event.location||(this.map=s.map("map",{dragging:!1,touchZoom:!1,doubleClickZoom:!1,scrollWheelZoom:!1,boxZoom:!1,keyboard:!1,zoomControl:!1}).setView([this.event.location.latitude,this.event.location.longitude],15),s.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"\xA9 OpenStreetMap contributors"}).addTo(this.map),s.marker([this.event.location.latitude,this.event.location.longitude]).addTo(this.map))}initializeImageSlider(){setTimeout(()=>{let t=document.querySelector(".mySwiper");t?new z(t,{modules:[B,R,O,j],spaceBetween:10,slidesPerView:1,navigation:!0,pagination:{clickable:!0},scrollbar:{draggable:!0}}):console.error("Swiper container not found.")},0)}copyEventUrl(){if(this.event&&this.event.id){let t=`your-app-base-url/event/${this.event.id}`;navigator.clipboard.writeText(t).then(()=>{alert("Event URL copied to clipboard!")}).catch(e=>{console.error("Could not copy text: ",e)})}}isInterested(){let t=this.authService.getUserId();return this.event&&this.event.interestedMembers&&this.event.interestedMembers.includes(t)}toggleInterest(){if(!this.event||!this.event.id)return;let t=this.authService.getUserId();t&&this.eventService.toggleUserInterest(this.event.id,t).then(()=>{this.event.interestedMembers&&this.event.interestedMembers.includes(t)?this.event.interestedMembers=this.event.interestedMembers.filter(e=>e!==t):this.event.interestedMembers=[...this.event.interestedMembers||[],t]}).catch(e=>{console.error("Error toggling interest:",e)})}static \u0275fac=function(e){return new(e||o)(m(L),m(P),m(V))};static \u0275cmp=g({type:o,selectors:[["app-details"]],standalone:!0,features:[w],decls:6,vars:2,consts:[[1,"container","mx-auto","p-6","bg-base-100","rounded-lg"],["class","text-gray-500 text-center py-8",4,"ngIf"],["class","flex flex-col md:flex-row gap-8",4,"ngIf"],[1,"mt-6","flex","justify-center"],["routerLink","/user/dashboard",1,"ml-1","bg-gray-500","hover:bg-gray-700","text-base-100","font-bold","py-2","px-4","rounded"],[1,"text-gray-500","text-center","py-8"],[1,"flex","flex-col","md:flex-row","gap-8"],[1,"md:w-1/2"],[1,"mb-6"],[1,"text-3xl","font-extrabold","text-base-content","mb-4"],[1,"text-base-content","text-lg","font-medium"],[1,"text-primary","font-bold"],[1,"text-base-content","flex","items-center"],[1,"fas","fa-users","mr-1"],[1,"swiper","mySwiper","rounded-lg",2,"height","320px",3,"slidesPerView","centeredSlides","initialSlide","threshold","mousewheel","spaceBetween"],[1,"rounded-lg",3,"src"],[1,"mt-6"],[1,"text-xl","font-bold","text-base-content","mb-3"],[1,"text-base-content","mb-2"],["class","text-base-content mb-2",4,"ngIf"],[1,"text-base-content"],[1,"mt-4","flex"],[1,"hover:bg-success-dark","text-base-100","font-bold","py-2","px-4","rounded",3,"click"],["style","height: 320px; margin-top: 100px;","id","map","class","h-96 rounded-lg shadow-lg border border-base-300 overflow-hidden",4,"ngIf"],["id","map",1,"h-96","rounded-lg","shadow-lg","border","border-base-300","overflow-hidden",2,"height","320px","margin-top","100px"]],template:function(e,c){e&1&&(n(0,"div",0),p(1,q,2,0,"div",1)(2,G,29,22,"div",2),n(3,"div",3)(4,"button",4),a(5," Back "),r()()()),e&2&&(i(),l("ngIf",!c.event),i(),l("ngIf",c.event))},dependencies:[U,D,C,T,k,A]})};export{N as EventDetailsComponent};
